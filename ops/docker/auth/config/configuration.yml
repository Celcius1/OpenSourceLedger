# ============================================================================
# OSL: Sovereign Accounting Suite - Auth Configuration
# AUTHOR: Cel-Tech-Serv Pty Ltd
# ============================================================================
server:
  address: "tcp4://0.0.0.0:9091"
  buffers:
    read: 16384
    write: 16384

authentication_backend:
  password_reset:
    disable: true # Set to false later once SMTP is configured  
  file:
    path: /config/users_database.yml

session:
  name: osl_session
  secret: 'jMY8bya5nZOOiJFmsDtGoAuJFyCoiUah3zeXfh2aYnXLobe4M4FnXah7XOWDpVJEc49VLd1J'
  expiration: 2h
  inactivity: 30m
  # Global 'domain' removed to allow 'cookies' block below
  cookies:
    - domain: "osl.net.au"
      authelia_url: "https://auth.osl.net.au"
      default_redirection_url: "https://osl.net.au"

storage:
  encryption_key: 'Im2isde0eP50tGNBuw2Xh6bEuz6sCE2YPWg9N6T7FaqPdLu527V8sYDw5DQhKBQeOhXrrahC'
  local:
    path: /config/db.sqlite3

access_control:
  default_policy: deny
  rules:
    - domain: "auth.osl.net.au"
      policy: bypass
    # 3-Tier Access Control
    - domain: "*.osl.net.au"
      policy: one_factor
      subject: 
        - ["group:admins"]      # Paul's Super-User access
        - ["group:accountants"] # Multi-tenancy management access
        - ["group:users"]       # Restricted client access

notifier:
  disable_startup_check: true
  filesystem:
    filename: /config/notification.txt

identity_validation:
  reset_password:
    jwt_secret: 'bf3YeDi5tChbdLh1AITuyBySfSBW8VFOdzKtMDptqPalDnjyXcmEaihMgtGtHbihrHjNahmg'
